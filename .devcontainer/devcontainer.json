{
  "name": "Golang Development Environment (Debian)",
  
  // 事前ビルドイメージを使用
  //"image": "ghcr.io/onisi/omu-sss-websys:2025autumn",

  // ローカルビルド時
  "build": {
    "dockerfile": "Dockerfile",
    "context": "."
  },
  
  // VS Code設定
  "customizations": {
    "vscode": {
      "extensions": [
        "golang.Go",
        "eamodio.gitlens",
        "ms-ceintl.vscode-language-pack-ja"
      ],
      
      "settings": {
        // ===== AI補完機能の無効化 =====
        "github.copilot.enable": {
          "*": false
        },
        "vsintellicode.modify.editor.suggestSelection": "automaticallyOverrodeDefaultValue",
        "tabnine.experimentalAutoImports": false,
        
        // ===== Go設定 =====
        "go.useLanguageServer": true,
        "go.lintTool": "golangci-lint",
        "go.lintOnSave": "package",
        "go.formatTool": "goimports",
        "go.toolsManagement.autoUpdate": true,
        
        // gopls設定
        "gopls": {
          "ui.semanticTokens": true,
          "analyses": {
            "unusedparams": true,
            "shadow": true
          }
        },
        
        // エディター設定
        "editor.formatOnSave": true,
        "editor.tabSize": 4,
        "editor.insertSpaces": true,
        
        "[go]": {
          "editor.defaultFormatter": "golang.go",
          "editor.codeActionsOnSave": {
            "source.organizeImports": "explicit"
          }
        },
        
        // ファイル設定
        "files.autoSave": "afterDelay",
        "files.insertFinalNewline": true,
        "files.trimTrailingWhitespace": true,
        
        // ターミナル設定
        "terminal.integrated.defaultProfile.linux": "bash"
      }
    }
  },
  
  // 起動時間短縮のための最小限コマンド
  "postCreateCommand": "go version",
  
  "remoteUser": "vscode",
  "workspaceFolder": "/workspaces/${localWorkspaceFolderBasename}",
  
  // ポートフォワーディング
  "forwardPorts": [8080],
  "portsAttributes": {
    "8080": {
      "label": "Application",
      "onAutoForward": "notify",
      "visibility": "public"
    }
  },
  
  // Go module cache永続化
  "mounts": [
    "source=go-mod-cache,target=/go/pkg/mod,type=volume"
  ],
  
  // Prebuild設定（起動時間短縮）
  "updateContentCommand": "go mod download || true",
  
  // Prebuild最適化
  "waitFor": "updateContentCommand"
}






